<!DOCTYPE html>
<html>

<head>
    <link rel="import" href="./common/header.html?__inline">
    <!-- css for this page only -->
    <link rel="stylesheet" type="text/css" href="../static/css/index.css">
    <link rel="stylesheet" type="text/css" href="../static/css/elementLibrary.css">
    <link rel="stylesheet" type="text/css" href="../static/css/metroStyle.css">
    <title>element library</title>
</head>

<body id="elementLibrary" v-cloak>
    <div class="content">
        <!--header start-->
        <link rel="import" href="./common/header-guide.html?__inline">
        <!--header end-->
        <!--sidebar start-->
        <link rel="import" href="./common/aside-guide.html?__inline">
        <!--sidebar end-->
        <!--main content start-->
        <section id="main-content">
            <section class="wrapper">
                <!-- breadcrumb start -->
                <div class="row">
                    <div class="col-lg-12">
                        <ul class="breadcrumb">
                            <li><a href="#"><i class="icon-home"></i> 测试系统</a></li>
                            <li><a href="#">功能点</a></li>
                            <li class="active">元素库</li>
                        </ul>
                    </div>
                </div>
                <!-- breadcrumb end -->
                <div class="row">
                    <div class="col-lg-12">
                        <section class="panel panel-pad">
                            <!-- select start -->
                            <form class="form-horizontal">
                                <div class="form-group">
                                    <label class="col-lg-2 control-label">所属被测系统</label>
                                    <div class="col-lg-2">
                                        <select class="form-control" id="autSelect">
                                        </select>
                                    </div>
                                    <label class="col-lg-2 control-label">所属功能点</label>
                                    <div class="col-lg-2">
                                        <select class="form-control" id="transactSelect">
                                        </select>
                                    </div>
                                    <div class="col-lg-2">
                                        <a class="btn btn-info">保存</a>
                                    </div>
                                </div>
                            </form>
                            <!-- select end -->
                        </section>
                    </div>
                </div>
                <div class="row">
                    <div class="col-lg-4">
                        <section class="panel">
                            <header class="panel-heading">
                                元素库
                            </header>
                            <div id="menuContent" class="menuContent treeMenu">
                                <ul id="elementtree" class="ztree tree"></ul>
                            </div>
                        </section>
                    </div>
                    <div class="col-lg-8">
                        <section class="panel">
                            <header class="panel-heading">
                                UI3
                            </header>
                            <div class="elementContent">
                                <form class="form-horizontal panel-pad">
                                    <div class="form-group">
                                        <label class="col-lg-2 control-label">UI名称：</label>
                                        <div class="col-lg-3">
                                            <input type="text" name="" class="form-control" value="UI3" disabled>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-lg-3 control-label">关联对象库中对象：</label>
                                        <div class="col-lg-3">
                                            <input type="text" name="" class="form-control" value="" disabled>
                                        </div>
                                        <div class="col-lg-2">
                                            <a class="btn btn-info" data-toggle="modal" href="#objectModal">关联对象</a>
                                        </div>
                                        <div class="col-lg-2">
                                            <a class="btn btn-info">解除关联</a>
                                        </div>
                                    </div>
                                    <a class="btn btn-info saveBtn">保存</a>
                                </form>
                            </div>
                        </section>
                        <section class="panel">
                            <header class="panel-heading">
                                元素1
                            </header>
                            <div class="elementContent">
                                <form class="form-horizontal panel-pad">
                                    <div class="form-group">
                                        <label class="col-lg-3 control-label">元素名称</label>
                                        <div class="col-lg-3">
                                            <input type="text" name="" class="form-control" value="元素1" disabled>
                                        </div>
                                        <label for="" class="col-lg-2 control-label">类型</label>
                                        <div class="col-lg-3">
                                            <select class="form-control">
                                                <option></option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-lg-3 control-label">对象库中父对象</label>
                                        <div class="col-lg-3">
                                            <input type="text" name="" class="form-control">
                                        </div>
                                        <div class="col-lg-2">
                                            <button class="btn btn-info" type="button">设置父对象</button>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-lg-3 control-label">对象库中关联对象</label>
                                        <div class="col-lg-3">
                                            <input type="text" name="" class="form-control">
                                        </div>
                                        <div class="col-lg-2">
                                            <button class="btn btn-info" type="button">设置关联对象</button>
                                        </div>
                                    </div>
                                </form>
                                <section class="panel small-panel">
                                    <header class="panel-heading">属性</header>
                                    <div class="property">主属性</div>
                                    <div class="property">
                                        <table class="table table-bordered">
                                            <thead>
                                                <tr>
                                                    <th>text</th>
                                                    <th>值</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td></td>
                                                    <td></td>
                                                </tr>
                                                <tr>
                                                    <td></td>
                                                    <td></td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                    <div class="property">附加属性</div>
                                    <div class="property">
                                        <table class="table table-bordered">
                                            <thead>
                                                <tr>
                                                    <th>text</th>
                                                    <th>值</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td></td>
                                                    <td></td>
                                                </tr>
                                                <tr>
                                                    <td></td>
                                                    <td></td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                    <div class="property">辅助属性</div>
                                    <div class="property">
                                        <table class="table table-bordered">
                                            <thead>
                                                <tr>
                                                    <th>text</th>
                                                    <th>值</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td></td>
                                                    <td></td>
                                                </tr>
                                                <tr>
                                                    <td></td>
                                                    <td></td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </section>
                                <section class="panel small-panel">
                                    <header class="panel-heading">关联元素</header>
                                    <div class="linked">
                                       <div class="linked-left">
                                           <span>已关联元素</span>
                                           <ul>
                                               <li><a href="">元素1</a></li>
                                               <li><a href="">元素2</a></li>
                                           </ul>
                                       </div> 
                                       <div class="linked-right">
                                           <span>元素1</span>属性
                                           <table class="table table-bordered">
                                               <thead>
                                                   <tr>
                                                       <th>名称</th>
                                                       <th>值</th>
                                                   </tr>
                                               </thead>
                                               <tbody>
                                                   <tr>
                                                       <td></td>
                                                       <td></td>
                                                   </tr>
                                               </tbody>
                                           </table>
                                       </div> 
                                    </div>     
                                </section>
                            </div>
                        </section>
                    </div>
                </div>
            </section>
            <link rel="import" href="./common/copy-right.html?__inline">
        </section>
        <!--main content end-->
        <!-- <div class="footer">
            <link rel="import" href="./common/copy-right.html?__inline">
        </div> -->
    </div>
    <!-- objectmodal start -->
    <div class="modal fade" id="objectModal" tabindex="-1" role="dialog" aria-labelledby="objectModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="modal-title">对象库</h4>
                </div>
                <div class="modal-body">
                    <div id="menuContent" class="menuContent treeMenu">
                        <ul id="objecttree" class="ztree tree"></ul>
                    </div>
                </div>
                <div class="modal-footer">
                    <button data-dismiss="modal" class="btn btn-default" type="button">取消</button>
                    <button class="btn btn-success" type="submit">确认</button>
                </div>
            </div>
        </div>
    </div>
    <!-- objectmodal end -->
</body>

</html>
<link rel="import" href="./common/footer.html?__inline">
<!--script for this page only-->
<script type="text/javascript" src="../static/js/elementLibrary.js"></script>
<!-- ztree -->
<script type="text/javascript" src="../lib/jquery.ztree.all.min.js"></script>
<script type="text/javascript">
var setting = {
    view: {
        addHoverDom: addHoverDom,
        removeHoverDom: removeHoverDom,
        selectedMulti: false
    },
    check: {
        enable: true
    },
    data: {
        simpleData: {
            enable: true
        }
    },
    edit: {
        enable: true
    }
};

var zNodes = [{
    id: 1,
    pId: 0,
    name: "父节点1",
    open: true
}, {
    id: 11,
    pId: 1,
    name: "父节点11"
}, {
    id: 111,
    pId: 11,
    name: "叶子节点111"
}, {
    id: 112,
    pId: 11,
    name: "叶子节点112"
}, {
    id: 113,
    pId: 11,
    name: "叶子节点113"
}, {
    id: 114,
    pId: 11,
    name: "叶子节点114"
}, {
    id: 12,
    pId: 1,
    name: "父节点12"
}, {
    id: 121,
    pId: 12,
    name: "叶子节点121"
}, {
    id: 122,
    pId: 12,
    name: "叶子节点122"
}, {
    id: 123,
    pId: 12,
    name: "叶子节点123"
}, {
    id: 124,
    pId: 12,
    name: "叶子节点124"
}, {
    id: 13,
    pId: 1,
    name: "父节点13",
    isParent: true
}, {
    id: 2,
    pId: 0,
    name: "父节点2"
}, {
    id: 21,
    pId: 2,
    name: "父节点21",
    open: true
}, {
    id: 211,
    pId: 21,
    name: "叶子节点211"
}, {
    id: 212,
    pId: 21,
    name: "叶子节点212"
}, {
    id: 213,
    pId: 21,
    name: "叶子节点213"
}, {
    id: 214,
    pId: 21,
    name: "叶子节点214"
}, {
    id: 22,
    pId: 2,
    name: "父节点22"
}, {
    id: 221,
    pId: 22,
    name: "叶子节点221"
}, {
    id: 222,
    pId: 22,
    name: "叶子节点222"
}, {
    id: 223,
    pId: 22,
    name: "叶子节点223"
}, {
    id: 224,
    pId: 22,
    name: "叶子节点224"
}, {
    id: 23,
    pId: 2,
    name: "父节点23"
}, {
    id: 231,
    pId: 23,
    name: "叶子节点231"
}, {
    id: 232,
    pId: 23,
    name: "叶子节点232"
}, {
    id: 233,
    pId: 23,
    name: "叶子节点233"
}, {
    id: 234,
    pId: 23,
    name: "叶子节点234"
}, {
    id: 3,
    pId: 0,
    name: "父节点3",
    isParent: true
}];

$(document).ready(function() {
    $.fn.zTree.init($("#elementtree"), setting, zNodes);
});

var newCount = 1;

function addHoverDom(treeId, treeNode) {
    var sObj = $("#" + treeNode.tId + "_span");
    if (treeNode.editNameFlag || $("#addBtn_" + treeNode.tId).length > 0) return;
    var addStr = "<span class='button add' id='addBtn_" + treeNode.tId + "' title='add node' onfocus='this.blur();'></span>";
    sObj.after(addStr);
    var btn = $("#addBtn_" + treeNode.tId);
    if (btn) btn.bind("click", function() {
        var zTree = $.fn.zTree.getZTreeObj("elementtree");
        zTree.addNodes(treeNode, {
            id: (100 + newCount),
            pId: treeNode.id,
            name: "new node" + (newCount++)
        });
        return false;
    });
};

function removeHoverDom(treeId, treeNode) {
    $("#addBtn_" + treeNode.tId).unbind().remove();
};
</script>
